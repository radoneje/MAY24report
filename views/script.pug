html
    head
        title="Статистика"
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="/axios.min.js"></script>
        style.
            .scriptContainer{
                padding: 12px;
                border:1px solid gray;
                border-radius: 4px;
            }
        body
            .container
                #app
                    select.mt-2#template(onchange="reloadTemplate()")
                        each t in templates
                            option(value=t.value) #{t.name}
                    #scriptContainer.mt-4
            script.
                let news = !{JSON.stringify(news)};
                let blocks = !{JSON.stringify(blocks)};
            script.
                const replaceSpecialCh=(text)=>{
                    try {
                        if (!text)
                            return ""
                        return text
                            .replace(/</igm, "&lt;")
                            .replace(/>/igm, "&gt;")
                            .replace(/\r\n/igm, "<br>")
                            .replace(/\n/igm, "<br>")
                    }
                    catch (e) {
                        console.warn(text)
                        return ""
                    }
                }
                const secToText=(totalSeconds)=>{
                    let hours = String(Math.floor(totalSeconds / 3600)).padStart(2, "0");
                    totalSeconds %= 3600;
                    let minutes = String(Math.floor(totalSeconds / 60)).padStart(2, "0");
                    let seconds = String(totalSeconds % 60).padStart(2, "0");
                    return hours + ":" + minutes + ":" + seconds

                }
                const reloadTemplate=()=>{
                    let template=JSON.parse(document.getElementById("template").value)
                    let box=document.getElementById("scriptContainer")
                    let html=template.news;
                    let blocksHtml=""
                    blocks.forEach(block=>{
                        let blockHtml=new String(template.block)
                        blockHtml=blockHtml
                            .replace(/\$BlockName/g, replaceSpecialCh(block.name))
                            .replace(/\$BlockText/g, replaceSpecialCh(block.BlockText))
                            .replace(/\$BlockAutor/g, block.author?replaceSpecialCh(block.author):"")
                            .replace(/\$BlockOperator/g, block.operator?replaceSpecialCh(block.operator):"")
                            .replace(/\$BlockJockey/g, block.jockey?replaceSpecialCh(block.jockey):"")
                            .replace(/\$BlockCutter/g, block.cutter?replaceSpecialCh(block.cutter):"")
                            .replace(/\$BlockCronoReal/g, secToText(block.BlockTime))
                            .replace(/\$BlockCronoTask/g, secToText(block.TaskTime))
                            .replace(/\$BlockCronoCalc/g, secToText(block.CalcTime))
                            .replace(/\$BlockReady/g, replaceSpecialCh(block.Ready?"True":"False"))
                            .replace(/\$BlockApprove/g, replaceSpecialCh(block.Approve?"True":"False"))
                            .replace(/\$BlockTypeId/g, replaceSpecialCh(block.BLockType))
                            .replace(/\$BlockType/g, replaceSpecialCh(block.typename))
                            .replace(/\$BlockNumber/g, (block.Sort))
                            .replace(/\$BlockId/g, (block.id))
                            .replace(/\$TextLang1/g, replaceSpecialCh(block.TextLang1))
                            .replace(/\$TextLang2/g, replaceSpecialCh(block.TextLang2))
                            .replace(/\$TextLang3/g, replaceSpecialCh(block.TextLang2))



                        blocksHtml+=blockHtml

                    })
                    html=html.replace("@BLOCK",blocksHtml)
                    box.innerHTML=html
                }
                reloadTemplate()

                /*

                "id": "937761295535471",
                               "name": "Анонс соцсети ",
                               "typename": "Студия",
                               "blocktype": 3,
                               "CreatorId": 356,
                               "author": "Шишков Никита Игоревич",
                               "OperatorId": 2005697520,
                               "operator": null,
                               "JockeyId": 2005697520,
                               "jockey": null,
                               "CutterId": 0,
                               "cutter": null,
                               "NewsId": "799554384220434",
                               "ParentId": "0",
                               "BlockTime": 0,
                               "TaskTime": 0,
                               "CalcTime": 26,
                               "BlockText": "Ставрополье претендует на звание делового центра всего Северного Кавказа. И как регион готовится ко Дню Победы? «Итоги на Своём», 6 мая в 8:30 и 13:30, 7 мая в 20:30. \r\n\r\n1) Выставка\r\n2) Репетиция парада \r\n\r\nСТАВРОПОЛЬЕ ПРЕТЕНДУЕТ НА ЗВАНИЕ ДЕЛОВОГО ЦЕНТРА ВСЕГО СЕВЕРНОГО КАВКАЗА. КАК РЕГИОН ГОТОВИТСЯ КО ДНЮ ПОБЕДЫ? «ИТОГИ НА СВОЁМ», 6 МАЯ В 8:30 И 13:30, 7 МАЯ В 20:30\r\n\r\n#инвестиции #минводы #выставка экономика #деньги #деньпобеды #парад #9мая ",
                               "Sort": 190,
                               "Ready": true,
                               "Approve": true,
                               "TextLang1": "",
                               "TextLang2": "",
                               "TextLang3": ""
                */
